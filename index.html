<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hot Alerts - Template</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/8lC922a.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        :root {
            --font-family-sans: 'Inter', sans-serif;
            --transition-speed: 0.3s;
            --animation-speed: 0.4s;

            /* Dark Theme */
            --background-dark: #111111;
            --surface-dark: #1c1c1c;
            --on-surface-dark: #e0e0e0;
            --on-surface-variant-dark: #8c8c8c;
            --primary-dark: #00aaff;
            --primary-variant-dark: #0088cc;
            --border-dark: #333333;
            --thumb-dark: #4a4a4a;
            --shadow-dark: rgba(0, 0, 0, 0.3);
            --error-dark: #ff5252;
            --warning-dark: #2e2020;
            --warning-text-dark: #ff8f8f;

            /* Light Theme */
            --background-light: #f5f7fa;
            --surface-light: #ffffff;
            --on-surface-light: #111111;
            --on-surface-variant-light: #6c757d;
            --primary-light: #007bff;
            --primary-variant-light: #0056b3;
            --border-light: #e0e0e0;
            --thumb-light: #c1c1c1;
            --shadow-light: rgba(0, 0, 0, 0.1);
            --error-light: #dc3545;
            --warning-light: #ffe0e0;
            --warning-text-light: #aa0000;

            /* Default to Dark Theme */
            --c-background: var(--background-dark);
            --c-surface: var(--surface-dark);
            --c-on-surface: var(--on-surface-dark);
            --c-on-surface-variant: var(--on-surface-variant-dark);
            --c-primary: var(--primary-dark);
            --c-primary-variant: var(--primary-variant-dark);
            --c-border: var(--border-dark);
            --c-thumb: var(--thumb-dark);
            --c-shadow: var(--shadow-dark);
            --c-error: var(--error-dark);
            --c-warning: var(--warning-dark);
            --c-warning-text: var(--warning-text-dark);
        }

        body.light-mode {
            --c-background: var(--background-light);
            --c-surface: var(--surface-light);
            --c-on-surface: var(--on-surface-light);
            --c-on-surface-variant: var(--on-surface-variant-light);
            --c-primary: var(--primary-light);
            --c-primary-variant: var(--primary-variant-light);
            --c-border: var(--border-light);
            --c-thumb: var(--thumb-light);
            --c-shadow: var(--shadow-light);
            --c-error: var(--error-light);
            --c-warning: var(--warning-light);
            --c-warning-text: var(--warning-text-light);
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            font-family: var(--font-family-sans);
            background-color: var(--c-background);
            color: var(--c-on-surface);
            display: flex;
            height: 100vh;
            overflow: hidden;
            transition: background-color var(--transition-speed), color var(--transition-speed);
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
        }

        input, textarea, .template-preview, .template-preview * {
            user-select: text;
            -webkit-user-select: text;
            cursor: text;
        }
        select {
             cursor: pointer;
        }

        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background-color: transparent; }
        ::-webkit-scrollbar-thumb { background-color: var(--c-thumb); border-radius: 4px; border: 2px solid var(--c-surface); }
        ::-webkit-scrollbar-thumb:hover { background-color: var(--c-primary-variant); }
        .sidebar-content, .card-container, .settings-container { scrollbar-width: thin; scrollbar-color: var(--c-thumb) var(--c-surface); }

        .sidebar { width: 320px; flex-shrink: 0; background-color: var(--c-surface); border-right: 1px solid var(--c-border); display: flex; flex-direction: column; padding: 24px; transition: margin-left var(--animation-speed), background-color var(--transition-speed), border-color var(--transition-speed); }
        body.settings-active .sidebar {
            margin-left: -321px; /* Hide sidebar */
        }

        .sidebar-header { display: flex; align-items: center; gap: 12px; margin-bottom: 28px; margin-top: 10px; }
        .logo-icon { width: 40px; height: 40px; }
        .logo-text { font-size: 24px; font-weight: 700; color: var(--c-primary); }
        .sidebar-content { flex-grow: 1; overflow-y: auto; padding: 8px 4px 8px 0; }

        .input-group { margin-bottom: 8px; }
        .input-field, .select-field { width: 100%; padding: 12px 16px; background-color: var(--c-background); border: 1px solid var(--c-border); border-radius: 8px; color: var(--c-on-surface); font-family: var(--font-family-sans); font-size: 14px; outline: none; transition: border-color var(--transition-speed), box-shadow var(--transition-speed); }
        .input-field::placeholder { color: var(--c-on-surface-variant); }

        .input-field:focus, .select-field:focus { border-color: var(--c-primary); box-shadow: 0 0 0 3px color-mix(in srgb, var(--c-primary) 20%, transparent); }
        .input-field.missing, .select-field.missing { border-color: var(--c-error); box-shadow: 0 0 0 3px color-mix(in srgb, var(--c-error) 20%, transparent); animation: shake 0.3s; }
        
        .sidebar-footer { padding-top: 16px; border-top: 1px solid var(--c-border); }
        .clear-btn { width: 100%; padding: 12px; background-color: var(--c-primary-variant); color: #fff; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: background-color var(--transition-speed); }
        .clear-btn:hover { background-color: var(--c-primary); }
        
        .main-content { flex-grow: 1; display: flex; flex-direction: column; overflow: hidden; }
        .main-header { display: flex; justify-content: space-between; align-items: center; padding: 20px 40px; border-bottom: 1px solid var(--c-border); background-color: var(--c-surface); flex-shrink: 0; gap: 20px;}
        .header-controls { display: flex; align-items: center; gap: 12px; flex-shrink: 0; margin-left: auto; }

        .search-container { position: relative; width: 100%; max-width: 500px; transition: opacity var(--animation-speed), visibility var(--animation-speed); flex-grow: 1; }
        .search-input { width: 100%; padding: 12px 16px 12px 48px; border-radius: 20px; border: 1px solid var(--c-border); background-color: var(--c-background); color: var(--c-on-surface); font-size: 14px; outline: none; }
        .search-icon { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); width: 20px; height: 20px; stroke: var(--c-on-surface); opacity: 0.5; }
        
        .header-btn { cursor: pointer; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; background-color: var(--c-surface); border: 1px solid var(--c-border); position: relative; transition: background-color var(--transition-speed); }
        .header-btn:hover { background-color: var(--c-background); }

        .header-icon { 
            transition: transform var(--animation-speed) ease, opacity calc(var(--animation-speed) / 2) ease, stroke var(--transition-speed), fill var(--transition-speed); 
            position: absolute;
            stroke: var(--c-primary-variant);
            fill: none;
        }

        .header-btn:hover .header-icon {
            stroke: var(--c-primary);
        }
        
        .header-icon.moon {
            fill: var(--c-primary-variant);
            stroke: none;
        }
        
        .header-btn:hover .header-icon.moon {
            fill: var(--c-primary);
            stroke: none;
        }
        
        #themeToggle.spin .header-icon {
            transform: rotate(360deg);
        }
        
        #settingsBtn .icon-close { transform: rotate(-90deg); opacity: 0; }
        body.settings-active #settingsBtn .icon-open { transform: rotate(90deg); opacity: 0; }
        body.settings-active #settingsBtn .icon-close { transform: rotate(0deg); opacity: 1; }

        body:not(.light-mode) .header-icon.sun { display: none; }
        body.light-mode .header-icon.moon { display: none; }
        
        .card-container { flex-grow: 1; padding: 40px; overflow-y: auto; }
        .card { background-color: var(--c-surface); border-radius: 12px; margin-bottom: 24px; border: 1px solid var(--c-border); overflow: hidden; transition: box-shadow 0.3s; }
        .card:hover { box-shadow: 0 8px 30px var(--c-shadow); }
        
        .card-header { padding: 20px 24px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .card-title { font-size: 18px; font-weight: 600; color: var(--c-primary); }
        .card-toggle-icon { width: 24px; height: 24px; transition: transform 0.3s; }
        .card.expanded .card-toggle-icon { transform: rotate(45deg); }

        .card-body { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out; padding: 0 24px; }
        .card.expanded .card-body { max-height: 1000px; padding: 0 24px 24px; }
        
        .template-preview { background-color: var(--c-background); border: 1px solid var(--c-border); border-radius: 8px; padding: 20px; font-size: 15px; line-height: 1.7; white-space: pre-wrap; word-wrap: break-word; }
        .template-preview .filled { font-weight: 600; color: var(--c-on-surface); }
        .template-preview .empty { color: var(--c-error); font-weight: 500; }
        
        .warning-message { margin-top: 16px; padding: 12px; background-color: var(--c-warning); color: var(--c-warning-text); border-radius: 8px; font-size: 14px; display: none; }
        .copy-btn { margin-top: 16px; padding: 12px 24px; background-color: var(--c-primary); color: #fff; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: background-color var(--transition-speed); }
        .copy-btn:hover:not(:disabled) { background-color: var(--c-primary-variant); }
        .copy-btn:disabled { background-color: var(--c-border); color: var(--c-on-surface); opacity: 0.6; cursor: not-allowed; }

        .settings-container { display: none; flex-grow: 1; padding: 40px; overflow-y: auto;}
        .settings-card { background-color: var(--c-surface); border-radius: 12px; padding: 24px; border: 1px solid var(--c-border); max-width: 600px; margin: auto; }
        .settings-title { font-size: 22px; font-weight: 700; margin-bottom: 24px; }
        .setting-item { margin-bottom: 20px; }
        .setting-item label { display: block; font-size: 14px; font-weight: 500; margin-bottom: 8px; }
        
        .hidden { opacity: 0; visibility: hidden; }

        @keyframes shake { 25% { transform: translateX(6px); } 75% { transform: translateX(-2px); } }
    </style>
</head>
<body>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="Spiral-Notepad--Streamline-Twemoji" height="28" width="28">
                  <desc>
                    Spiral Notepad Streamline Emoji: https://streamlinehq.com
                  </desc>
                      <path fill="#66757f" d="M21.63388888888889 3.111111111111111h1.5524444444444445v1.8596666666666668h-1.5524444444444445z" stroke-width="0.7778"></path>
                      <path fill="#55acee" d="M22.555555555555557 3.111111111111111H7C5.281888888888889 3.111111111111111 3.888888888888889 4.504111111111111 3.888888888888889 6.222222222222222v18.666666666666668c0 1.7181111111111111 1.393 3.111111111111111 3.111111111111111 3.111111111111111h15.555555555555555c1.7181111111111111 0 3.111111111111111 -1.393 3.111111111111111 -3.111111111111111V6.222222222222222c0 -1.7181111111111111 -1.393 -3.111111111111111 -3.111111111111111 -3.111111111111111z" stroke-width="0.7778"></path>
                      <path fill="#ccd6dd" d="M21 3.111111111111111H5.444444444444445C3.7263333333333337 3.111111111111111 2.3333333333333335 4.504111111111111 2.3333333333333335 6.222222222222222v18.666666666666668c0 1.7181111111111111 1.393 3.111111111111111 3.111111111111111 3.111111111111111h15.555555555555555c1.7181111111111111 0 3.111111111111111 -1.393 3.111111111111111 -3.111111111111111V6.222222222222222c0 -1.7181111111111111 -1.393 -3.111111111111111 -3.111111111111111 -3.111111111111111z" stroke-width="0.7778"></path>
                      <path fill="#99aab5" d="M21.77777777777778 11.666666666666666c0 0.43011111111111117 -0.3476666666666667 0.7777777777777778 -0.7777777777777778 0.7777777777777778H5.444444444444445c-0.4293333333333334 0 -0.7777777777777778 -0.3476666666666667 -0.7777777777777778 -0.7777777777777778 0 -0.4293333333333334 0.34844444444444445 -0.7777777777777778 0.7777777777777778 -0.7777777777777778h15.555555555555555c0.43011111111111117 0 0.7777777777777778 0.34844444444444445 0.7777777777777778 0.7777777777777778zm0 3.888888888888889c0 0.43011111111111117 -0.3476666666666667 0.7777777777777778 -0.7777777777777778 0.7777777777777778H5.444444444444445c-0.4293333333333334 0 -0.7777777777777778 -0.3476666666666667 -0.7777777777777778 -0.7777777777777778 0 -0.43011111111111117 0.34844444444444445 -0.7777777777777778 0.7777777777777778 -0.7777777777777778h15.555555555555555c0.43011111111111117 0 0.7777777777777778 0.3476666666666667 0.7777777777777778 0.7777777777777778zm0 3.888888888888889c0 0.43011111111111117 -0.3476666666666667 0.7777777777777778 -0.7777777777777778 0.7777777777777778H5.444444444444445c-0.4293333333333334 0 -0.7777777777777778 -0.3476666666666667 -0.7777777777777778 -0.7777777777777778 0 -0.43011111111111117 0.34844444444444445 -0.7777777777777778 0.7777777777777778 -0.7777777777777778h15.555555555555555c0.43011111111111117 0 0.7777777777777778 0.3476666666666667 0.7777777777777778 0.7777777777777778zm-6.222222222222222 3.888888888888889c0 0.43011111111111117 -0.3476666666666667 0.7777777777777778 -0.7777777777777778 0.7777777777777778H5.444444444444445c-0.4293333333333334 0 -0.7777777777777778 -0.3476666666666667 -0.7777777777777778 -0.7777777777777778 0 -0.43011111111111117 0.34844444444444445 -0.7777777777777778 0.7777777777777778 -0.7777777777777778h9.333333333333334c0.43011111111111117 0 0.7777777777777778 0.3476666666666667 0.7777777777777778 0.7777777777777778z" stroke-width="0.7778"></path>
                      <path fill="#292f33" d="M6.094666666666667 6.790777777777778c-0.5459999999999999 0 -0.9885555555555555 -0.518 -0.9885555555555555 -1.1581111111111113 0 -0.6393333333333333 0.44255555555555554 -1.1581111111111113 0.9885555555555555 -1.1581111111111113 0.5452222222222222 0 0.9877777777777778 0.5187777777777778 0.9877777777777778 1.1581111111111113 0 0.6393333333333333 -0.44255555555555554 1.1581111111111113 -0.9877777777777778 1.1581111111111113z" stroke-width="0.7778"></path>
                      <path fill="#66757f" d="M6.644555555555555 5.509c-0.042777777777777776 -0.37333333333333335 -0.2908888888888889 -0.616 -0.567 -0.7909999999999999 -0.37722222222222224 -0.23877777777777778 -0.7777777777777778 -0.784 -0.7777777777777778 -1.459888888888889 0 -0.8586666666666668 0.521888888888889 -1.6294444444444447 1.1666666666666667 -1.6294444444444447s1.1666666666666667 0.7038888888888889 1.1666666666666667 1.4816666666666667h1.5524444444444445c-0.016333333333333335 -1.5555555555555556 -1.225 -2.971888888888889 -2.7191111111111113 -2.971888888888889 -1.5042222222222221 0 -2.7222222222222223 1.4147777777777777 -2.7222222222222223 3.1149999999999998 0 1.4412222222222222 0.8127777777777777 2.621888888888889 1.9981111111111112 3.0535555555555556 0.5911111111111111 0.2146666666666667 0.952 -0.3476666666666667 0.9022222222222221 -0.798z" stroke-width="0.7778"></path>
                      <path fill="#292f33" d="M10.761333333333333 6.790777777777778c-0.5459999999999999 0 -0.9885555555555555 -0.518 -0.9885555555555555 -1.1581111111111113 0 -0.6393333333333333 0.44255555555555554 -1.1581111111111113 0.9885555555555555 -1.1581111111111113 0.5452222222222222 0 0.9877777777777778 0.5187777777777778 0.9877777777777778 1.1581111111111113 0 0.6393333333333333 -0.44255555555555554 1.1581111111111113 -0.9877777777777778 1.1581111111111113z" stroke-width="0.7778"></path>
                      <path fill="#66757f" d="M11.311222222222222 5.509c-0.042777777777777776 -0.37333333333333335 -0.2908888888888889 -0.616 -0.567 -0.7909999999999999 -0.37722222222222224 -0.23877777777777778 -0.7777777777777778 -0.784 -0.7777777777777778 -1.459888888888889 0 -0.8586666666666668 0.521888888888889 -1.6294444444444447 1.1666666666666667 -1.6294444444444447s1.1666666666666667 0.7038888888888889 1.1666666666666667 1.4816666666666667h1.5524444444444445c-0.015555555555555557 -1.5555555555555556 -1.225 -2.971888888888889 -2.7191111111111113 -2.971888888888889 -1.5042222222222221 0 -2.7222222222222223 1.4147777777777777 -2.7222222222222223 3.1149999999999998 0 1.4412222222222222 0.8127777777777777 2.621888888888889 1.9981111111111112 3.0535555555555556 0.5911111111111111 0.2146666666666667 0.952 -0.3476666666666667 0.9022222222222221 -0.798z" stroke-width="0.7778"></path>
                      <path fill="#292f33" d="M15.427999999999999 6.790777777777778c-0.5459999999999999 0 -0.9885555555555555 -0.518 -0.9885555555555555 -1.1581111111111113 0 -0.6393333333333333 0.44255555555555554 -1.1581111111111113 0.9885555555555555 -1.1581111111111113 0.5452222222222222 0 0.9885555555555555 0.5187777777777778 0.9885555555555555 1.1581111111111113 -0.0007777777777777778 0.6393333333333333 -0.4433333333333333 1.1581111111111113 -0.9885555555555555 1.1581111111111113z" stroke-width="0.7778"></path>
                      <path fill="#66757f" d="M15.977888888888888 5.509c-0.042777777777777776 -0.37333333333333335 -0.2908888888888889 -0.616 -0.5662222222222222 -0.7909999999999999 -0.37722222222222224 -0.23877777777777778 -0.7777777777777778 -0.784 -0.7777777777777778 -1.459888888888889 0 -0.8586666666666668 0.521888888888889 -1.6294444444444447 1.1666666666666667 -1.6294444444444447s1.1666666666666667 0.7038888888888889 1.1666666666666667 1.4816666666666667h1.5524444444444445c-0.015555555555555557 -1.5555555555555556 -1.225 -2.971888888888889 -2.7191111111111113 -2.971888888888889 -1.5042222222222221 0 -2.7222222222222223 1.4147777777777777 -2.7222222222222223 3.1149999999999998 0 1.4412222222222222 0.8127777777777777 2.621888888888889 1.9981111111111112 3.0535555555555556 0.5903333333333334 0.2146666666666667 0.9512222222222223 -0.3476666666666667 0.9014444444444445 -0.798z" stroke-width="0.7778"></path>
                      <path fill="#292f33" d="M20.094666666666665 6.790777777777778c-0.5459999999999999 0 -0.9885555555555555 -0.518 -0.9885555555555555 -1.1581111111111113 0 -0.6393333333333333 0.44255555555555554 -1.1581111111111113 0.9885555555555555 -1.1581111111111113 0.5452222222222222 0 0.9885555555555555 0.5187777777777778 0.9885555555555555 1.1581111111111113 -0.0007777777777777778 0.6393333333333333 -0.4433333333333333 1.1581111111111113 -0.9885555555555555 1.1581111111111113z" stroke-width="0.7778"></path>
                      <path fill="#66757f" d="M20.644555555555556 5.509c-0.042777777777777776 -0.37333333333333335 -0.2908888888888889 -0.616 -0.5662222222222222 -0.7909999999999999 -0.37722222222222224 -0.23877777777777778 -0.7777777777777778 -0.784 -0.7777777777777778 -1.459888888888889 0 -0.8586666666666668 0.521888888888889 -1.6294444444444447 1.1666666666666667 -1.6294444444444447s1.1666666666666667 0.7038888888888889 1.1666666666666667 1.4816666666666667h1.5524444444444445c-0.015555555555555557 -1.5555555555555556 -1.225 -2.971888888888889 -2.7191111111111113 -2.971888888888889 -1.5042222222222221 0 -2.7222222222222223 1.4147777777777777 -2.7222222222222223 3.1149999999999998 0 1.4412222222222222 0.8127777777777777 2.621888888888889 1.9981111111111112 3.0535555555555556 0.5903333333333334 0.2146666666666667 0.9512222222222223 -0.3476666666666667 0.9014444444444445 -0.798z" stroke-width="0.7778"></path>
            </svg>
            <span class="logo-text">Hot Alerts</span>
        </div>

        <div class="sidebar-content">
            <div class="input-group">
                <select id="customerTitle" class="select-field">
                    <option value="">Select Title</option>
                    <option value="Mr.">Mr.</option>
                    <option value="Mrs.">Mrs.</option>
                    <option value="Ms.">Ms.</option>
                </select>
            </div>
            <div class="input-group">
                <input type="text" id="customerName" class="input-field" placeholder="Customer Name">
            </div>
            <div class="input-group">
                <input type="text" id="phoneNumber" class="input-field" placeholder="Phone Number">
            </div>
            <div class="input-group">
                <input type="text" id="vehicle" class="input-field" placeholder="Vehicle (e.g., Toyota Camry)">
            </div>
            <div class="input-group">
                <input type="text" id="vin" class="input-field" placeholder="VIN (17 characters)" maxlength="17">
            </div>
            <div class="input-group">
                <input type="text" id="advisor" class="input-field" placeholder="Advisor Name">
            </div>
            <div class="input-group">
                <input type="text" id="schedule" class="input-field" placeholder="Schedule (e.g., Tomorrow 10 AM)">
            </div>
            <div class="input-group">
                <input type="text" id="accessoryParts" class="input-field" placeholder="Accessory / Parts">
            </div>
            <div class="input-group">
                <input type="text" id="tireBrandSize" class="input-field" placeholder="Tire Brand & Size">
            </div>
            <div class="input-group">
                <input type="text" id="service" class="input-field" placeholder="Service (e.g., Oil Change)">
            </div>
            <div class="input-group">
                <input type="text" id="otherConcern" class="input-field" placeholder="Other Concern">
            </div>
            <div class="input-group">
                <input type="text" id="recall" class="input-field" placeholder="RECALL Number or Description">
            </div>
        </div>

        <div class="sidebar-footer">
            <button class="clear-btn" id="clearAllBtn">Clear All Fields</button>
        </div>
    </aside>

    <main class="main-content">
        <header class="main-header">
            <div class="search-container" id="searchContainer">
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                <input type="text" id="cardSearchInput" class="search-input" placeholder="Search templates (e.g., 'tire' or 'recall')...">
            </div>
            <div class="header-controls">
                <button id="themeToggle" class="header-btn" aria-label="Toggle theme">
                    <svg class="header-icon sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg>
                    <svg class="header-icon moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg>
                </button>
                <button id="settingsBtn" class="header-btn" aria-label="Settings">
                    <svg class="header-icon icon-open" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg>
                    <svg class="header-icon icon-close" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
        </header>

        <div class="card-container" id="cardContainer">
        </div>
            
        <div class="settings-container" id="settingsPage">
            <div class="settings-card">
                <h2 class="settings-title">Settings</h2>
                <div class="setting-item">
                    <label for="languageSelect">Language</label>
                    <select id="languageSelect" class="select-field">
                        <option>English</option>
                        <option disabled>Español (coming soon)</option>
                        <option disabled>Français (coming soon)</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label>Default Theme</label>
                    <select id="defaultThemeSelect" class="select-field">
                        <option value="dark">Dark</option>
                        <option value="light">Light</option>
                    </select>
                </div>
            </div>
        </div>
    </main>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const templates = [
        { title: "Accessory/Parts Install", required: ["customerTitle", "customerName", "accessoryParts", "vehicle", "vin", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] is looking to schedule an appointment regarding an [[accessoryParts]] for their [[vehicle]] - [[vin]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact your earliest convenience to set an appointment.\n\nThank you.` },
        { title: "Cancel DMS Appointment", required: ["customerTitle", "customerName", "vehicle", "vin", "schedule", "service", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] is requesting to cancel the DMS appointment for their [[vehicle]] – [[vin]], scheduled for [[schedule]], for the following service: [[service]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you!` },
        { title: "Detailing", required: ["customerTitle", "customerName", "vehicle", "vin", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] is looking to schedule a detail for their [[vehicle]] - [[vin]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact the customer at your earliest convenience to set an appointment.\n\nThank you.` },
        { title: "Emergency Walk-ins", required: ["customerTitle", "customerName", "vehicle", "vin", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] will be towing in their [[vehicle]] – [[vin]] today, as it is inoperable.\n\nYou may reach the customer at [[phoneNumber]].\n\nThe customer is aware that the vehicle may not be serviced today.\n\nThank you.` },
        { title: "General Inquiry", required: ["customerTitle", "customerName", "otherConcern", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] would like to inquire about [[otherConcern]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you.` },
        { title: "Glass Services", required: ["customerTitle", "customerName", "accessoryParts", "vehicle", "vin", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] is looking to schedule an appointment for a glass replacement service ([[accessoryParts]]) for their [[vehicle]] – [[vin]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience to set an appointment.\n\nThank you.` },
        { title: "Keys", required: ["customerTitle", "customerName", "vehicle", "vin", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] needs to schedule an appointment for their [[vehicle]] – [[vin]] regarding a replacement key.\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience to set the appointment.\n\nThank you.` },
        { title: "Loaner Car", required: ["customerTitle", "customerName", "vehicle", "vin", "schedule", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] is looking to acquire a loaner vehicle as a replacement for their [[vehicle]] – [[vin]], which is scheduled for service at [[schedule]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you!` },
        { title: "Need Appointment Scheduled", required: ["customerTitle", "customerName", "vehicle", "vin", "service", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] needs to schedule an appointment for their [[vehicle]] – [[vin]] for the following service: [[service]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you!` },
        { title: "Parts Pricing", required: ["customerTitle", "customerName", "accessoryParts", "vehicle", "vin", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] is looking to get a pricing quote for a [[accessoryParts]] for their [[vehicle]] – [[vin]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you!` },
        { title: "RECALL - Needs to be Scheduled", required: ["customerTitle", "customerName", "recall", "vehicle", "vin", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] needs to schedule a recall service ([[recall]]) for their [[vehicle]] – [[vin]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact the customer to schedule at your earliest convenience.\n\nThank you!` },
        { title: "RECALL - Scheduled", required: ["customerTitle", "customerName", "schedule", "recall", "vehicle", "vin", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] has scheduled an appointment at [[schedule]] for the active recall ([[recall]]) on their [[vehicle]] – [[vin]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact the customer if further scheduling or assistance is needed.\n\nThank you!` },
        { title: "Rental Car", required: ["customerTitle", "customerName", "vehicle", "vin", "schedule", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] is looking to acquire a rental vehicle as a replacement for their [[vehicle]] – [[vin]], which is scheduled for service at [[schedule]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you!` },
        { title: "Scheduled Appointment", required: ["customerTitle", "customerName", "vehicle", "vin", "service", "schedule", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] has scheduled an appointment for their [[vehicle]] – [[vin]] for the following service: [[service]]. The appointment is scheduled at [[schedule]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you!` },
        { title: "Service Pricing", required: ["customerTitle", "customerName", "service", "vehicle", "vin", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] is looking to get a pricing quote for an [[service]] for their [[vehicle]] – [[vin]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you!` },
        { title: "Shuttle Service", required: ["customerTitle", "customerName", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] is requesting to be contacted regarding a drop-off using the shuttle service.\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you!` },
        { title: "Speak with Advisor", required: ["customerTitle", "customerName", "advisor", "vehicle", "vin", "otherConcern", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] would like to speak with their advisor, [[advisor]], regarding their [[vehicle]] – [[vin]], about [[otherConcern]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you.` },
        { title: "Status Check", required: ["customerTitle", "customerName", "advisor", "vehicle", "vin", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] would like to receive an update from their advisor, [[advisor]], regarding their [[vehicle]] – [[vin]], which is currently in service.\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you!` },
        { title: "Timeframe for Service", required: ["customerTitle", "customerName", "service", "vehicle", "vin", "schedule", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] is looking to know the rough time estimate of the service: [[service]], for their [[vehicle]] – [[vin]], which is scheduled for service at [[schedule]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you!` },
        { title: "Tire", required: ["customerTitle", "customerName", "vehicle", "vin", "tireBrandSize", "count", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] needs to order a tire for their [[vehicle]] – [[vin]].\n\nThe customer has specified a [[tireBrandSize]] and requires [[count]].\n\nYou may reach the customer at [[phoneNumber]].\n\nPlease contact and assist at your earliest convenience.\n\nThank you!`, customElement: `<div class="input-group" style="margin-top: 16px;"><select id="count" class="select-field"><option value="">Select number of tires</option><option value="one tire">One tire</option><option value="two tires">Two tires</option><option value="three tires">Three tires</option><option value="four tires">Four tires</option></select></div>` },
        { title: "Tow-in", required: ["customerTitle", "customerName", "vehicle", "vin", "otherConcern", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] will be towing in their [[vehicle]] – [[vin]].\n\nThe customer stated that [[otherConcern]]. The customer has been informed that same-day service for tow-ins cannot be guaranteed.\n\nYou may reach the customer at [[phoneNumber]]. Please contact and assist at your earliest convenience.\n\nThank you!` },
        { title: "Update DMS Appointment", required: ["customerTitle", "customerName", "vehicle", "vin", "schedule", "service", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] has scheduled an appointment for their [[vehicle]] – [[vin]], for the following service: [[service]], scheduled at [[schedule]].\n\nWe request to cancel the existing DMS appointment for this customer.\n\nYou may reach the customer at [[phoneNumber]]. Please contact and assist at your earliest convenience.\n\nThank you!` },
        { title: "Valet Request", required: ["customerTitle", "customerName", "vehicle", "vin", "service", "phoneNumber"], template: `Good day,\n\n[[customerTitle]] [[customerName]] is looking to schedule a valet appointment for their [[vehicle]] – [[vin]] with the following service: [[service]].\n\nYou may reach the customer at [[phoneNumber]]. Please contact and assist at your earliest convenience.\n\nThank you.` }
    ];

    const cardList = document.getElementById('cardContainer');
    const allInputFields = document.querySelectorAll('.sidebar-content .input-field, .sidebar-content .select-field');
    const body = document.body;

    // Page View Elements
    const searchContainer = document.getElementById('searchContainer');
    const settingsBtn = document.getElementById('settingsBtn');
    const cardContainer = document.getElementById('cardContainer');
    const settingsPage = document.getElementById('settingsPage');

    const fieldDisplayNames = {
        customerTitle: "Select Title",
        phoneNumber: "Phone Number",
        customerName: "Customer Name",
        vehicle: "Vehicle",
        vin: "VIN",
        advisor: "Advisor",
        schedule: "Schedule",
        accessoryParts: "Accessory / Parts",
        tireBrandSize: "Tire Brand & Size",
        service: "Service",
        otherConcern: "Other Concern",
        recall: "RECALL",
        count: "Number of tires"
    };

    function createCards() {
        templates.forEach((templateData) => {
            const card = document.createElement('div');
            card.className = 'card';
            card.dataset.title = templateData.title.toLowerCase();
            card.dataset.required = templateData.required.join(',');

            card.innerHTML = `
                <div class="card-header">
                    <span class="card-title">${templateData.title}</span>
                    <svg class="card-toggle-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                </div>
                <div class="card-body">
                    ${templateData.customElement || ''}
                    <div class="template-preview"></div>
                    <div class="warning-message"></div>
                    <button class="copy-btn">Copy Template</button>
                </div>
            `;
            cardList.appendChild(card);
            card.querySelector('.card-header').addEventListener('click', () => toggleCard(card));
            card.querySelector('.copy-btn').addEventListener('click', () => copyTemplate(card));
        });
    }

    function toggleCard(card) {
        document.querySelectorAll('.card.expanded').forEach(openCard => {
            if (openCard !== card) openCard.classList.remove('expanded');
        });
        document.querySelectorAll('.missing').forEach(el => el.classList.remove('missing'));
        card.classList.toggle('expanded');
        if (card.classList.contains('expanded')) updateCardContent(card);
    }

    function updateAllCards() {
        document.querySelectorAll('.card.expanded').forEach(updateCardContent);
    }

    function getFormattedValue(fieldId, value) {
        value = value.trim();
        if (!value) return value;
        switch (fieldId) {
            case 'customerName': case 'advisor': case 'accessoryParts': case 'service':
                return value.toLowerCase().split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
            case 'vehicle': case 'vin': case 'schedule': case 'tireBrandSize':
                return value.toUpperCase();
            case 'otherConcern':
                return value.charAt(0).toUpperCase() + value.slice(1).toLowerCase();
            default: return value;
        }
    }

    function updateCardContent(card) {
        const requiredFields = card.dataset.required.split(',');
        const preview = card.querySelector('.template-preview');
        const warning = card.querySelector('.warning-message');
        const copyBtn = card.querySelector('.copy-btn');
        const templateData = templates.find(t => t.title.toLowerCase() === card.dataset.title);
        let allRequiredFilled = true;
        const missingFieldNames = [];

        requiredFields.forEach(fieldId => {
            const element = document.getElementById(fieldId);
            if (element && !element.value.trim()) {
                allRequiredFilled = false;
                element.classList.add('missing');
                missingFieldNames.push(element.placeholder || fieldDisplayNames[fieldId]);
            } else if (element) {
                element.classList.remove('missing');
            }
        });

        const renderedTemplate = templateData.template.replace(/\[\[(.*?)\]\]/g, (_, fieldId) => {
            const element = document.getElementById(fieldId);
            const value = element ? element.value : '';
            const formattedValue = getFormattedValue(fieldId, value);
            return formattedValue ? `<span class="filled">${formattedValue}</span>` : `<span class="empty">[${element.placeholder}]</span>`;
        });

        preview.innerHTML = renderedTemplate;
        warning.style.display = allRequiredFilled ? 'none' : 'block';
        copyBtn.disabled = !allRequiredFilled;
        if (!allRequiredFilled) warning.textContent = `⚠️ Required: ${missingFieldNames.join(', ')}`;
    }

    function copyTemplate(card) {
        const preview = card.querySelector('.template-preview');
        const copyBtn = card.querySelector('.copy-btn');
        navigator.clipboard.writeText(preview.innerText).then(() => {
            copyBtn.textContent = 'Copied!';
            setTimeout(() => { copyBtn.textContent = 'Copy Template'; }, 1500);
        });
    }

    function clearAllFields() {
        const clearButton = document.getElementById('clearAllBtn');
        allInputFields.forEach(input => {
            input.value = '';
            input.classList.remove('missing');
        });
        const customSelects = document.querySelectorAll('.card-body .select-field');
        customSelects.forEach(select => { select.value = ''; select.classList.remove('missing'); });
        updateAllCards();
        clearButton.textContent = 'Cleared!';
        setTimeout(() => { clearButton.textContent = 'Clear All Fields'; }, 1500);
    }

    function toggleSettingsView() {
        body.classList.toggle('settings-active');
        const isSettingsActive = body.classList.contains('settings-active');
        
        if (isSettingsActive) {
            cardContainer.style.display = 'none';
            searchContainer.classList.add('hidden');
            settingsPage.style.display = 'block';
        } else {
            settingsPage.style.display = 'none';
            cardContainer.style.display = 'block';
            searchContainer.classList.remove('hidden');
        }
    }

    document.getElementById('phoneNumber').addEventListener('input', (e) => {
        const x = e.target.value.replace(/\D/g, '').match(/(\d{0,3})(\d{0,3})(\d{0,4})/);
        e.target.value = !x[2] ? x[1] : `(${x[1]}) ${x[2]}` + (x[3] ? `-${x[3]}` : '');
    });

    document.getElementById('vin').addEventListener('input', (e) => {
        e.target.value = e.target.value.replace(/[^a-zA-Z0-9]/g, '').toUpperCase();
    });

    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
        const isLight = body.classList.toggle('light-mode');
        localStorage.setItem('theme', isLight ? 'light' : 'dark');
        themeToggle.classList.add('spin');
        setTimeout(() => themeToggle.classList.remove('spin'), 500);
    });

    document.getElementById('cardSearchInput').addEventListener('keyup', (e) => {
        const searchTerm = e.target.value.toLowerCase();
        document.querySelectorAll('.card').forEach(card => {
            card.style.display = card.dataset.title.includes(searchTerm) ? 'block' : 'none';
        });
    });

    document.getElementById('clearAllBtn').addEventListener('click', clearAllFields);
    settingsBtn.addEventListener('click', toggleSettingsView);

    createCards();
    if (localStorage.getItem('theme') === 'light') body.classList.add('light-mode');
    allInputFields.forEach(field => field.addEventListener('input', updateAllCards));
    cardList.addEventListener('change', (e) => {
        if (e.target.matches('.card-body .select-field')) updateAllCards();
    });
});
</script>
</body>
</html>
